<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>    <!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <!-- Bootstrap CSS -->
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <link rel="stylesheet" href="css/style.css">

    <script type="text/javascript" src="data/cityList.json"></script>

    <title>Weather Dashboard</title>
  </head>
  <body>
    <div class="container">
        <div class="row header">
            <div class="col-sm">
                <h1 class="center">Weather Dashboard</h1>
            </div>
        </div>
        <div class="row">
          <div class="col-sm-3">
            <div class="row">
                <div class="col-sm">
                    <form>
                        <div class="input-group">
                          <input type="text" class="form-control" id="search-box" placeholder="Search">
                          <div class="input-group-btn" id="search-btn">
                            <button class="btn btn-default sxbtn" type="submit">
                              <i class="glyphicon glyphicon-search"></i>
                            </button>
                          </div>
                        </div>
                            <div id="search-result">
                              <p class="filter-list" id="item0">item0</p>
                              <p class="filter-list" id="item1">item1</p>
                              <p class="filter-list" id="item2">item2</p>
                              <p class="filter-list" id="item3">item3</p>
                              <p class="filter-list" id="item4">item4</p>  
                            </div>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div id="history-list">
                      <!-- add the history search here -->
                    </div>
                </div>
            </div>

          </div>
          <!-- current weather section -->
          <div class="col-sm-9" style="background-color:lightcyan">
            <div class="row sx-row">
                <div class="col-sm sx-col">
                    <div class="card" style="width: 100%;">
                        <div class="card-body sx-card">
                          <h3 class="card-title">
                            <span id="city-name">City Name</span>
                            <span id="date">Date</span>
                            <img id="icon">
                            <!-- <span id="icon">icon</span> -->
                            <span id="description"></span>
                          </h3>
                          <p class="card-text">Temperature: 
                            <span id="temperature"></span>
                            &#8457
                          </p>
                          <p class="card-text">Humidity: 
                            <span id="humidity"></span>
                            %
                          </p>
                          <p class="card-text">Wind Speed: 
                            <span id="wind"></span>
                            MPH
                          </p>
                          <p class="card-text">UV index: 
                            <span id="uv"></span>
                          </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 5 day forecast button -->
            <div class="row sx-row">
                <div class="col-sm">
                    <h3>5-Day Forecast</h3>
                </div>
            </div>
            <!-- 5 day forecast cards -->
            <div class="row sx-row">
                <div class="col-sm sx-col" id="day0">
                    <div class="card">
                      <div class="card-body sx-5-day-card">
                        <h3 class="date-forecast">Date</h3>
                        <p><img class="icon-forecast"></p>
                        <p class="description-forecast"></p>
                        <p>Temp: <span class="temp-forecast"></span> &#8457</p>
                        <p>Humidity: <span class="humidity-forecast"></span>%</p>
                        <p>Wind: <span class="wind-forecast"></span> MPH</p>
                      </div>
                  </div>
                </div>
                <div class="col-sm sx-col" id="day1">
                    <div class="card">
                      <div class="card-body sx-5-day-card">
                        <h3 class="date-forecast">Date</h3>
                        <p><img class="icon-forecast"></p>
                        <p class="description-forecast"></p>
                        <p>Temp: <span class="temp-forecast"></span> &#8457</p>
                        <p>Humidity: <span class="humidity-forecast"></span>%</p>
                        <p>Wind: <span class="wind-forecast"></span> MPH</p>

                      </div>
                  </div>
                </div>
                <div class="col-sm sx-col" id="day2">
                    <div class="card">
                      <div class="card-body sx-5-day-card">
                        <h3 class="date-forecast">Date</h3>
                        <p><img class="icon-forecast"></p>
                        <p class="description-forecast"></p>
                        <p>Temp: <span class="temp-forecast"></span> &#8457</p>
                        <p>Humidity: <span class="humidity-forecast"></span>%</p>
                        <p>Wind: <span class="wind-forecast"></span> MPH</p>
                      </div>
                  </div>
                </div>
                <div class="col-sm sx-col" id="day3">
                    <div class="card">
                        <div class="card-body sx-5-day-card">
                          <h3 class="date-forecast">Date</h3>
                          <p><img class="icon-forecast"></p>
                          <p class="description-forecast"></p>
                          <p>Temp: <span class="temp-forecast"></span> &#8457</p>
                          <p>Humidity: <span class="humidity-forecast"></span>%</p>
                          <p>Wind: <span class="wind-forecast"></span> MPH</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm sx-col" id="day4">
                    <div class="card">
                      <div class="card-body sx-5-day-card">
                        <h3 class="date-forecast">Date</h3>
                        <p><img class="icon-forecast"></p>
                        <p class="description-forecast"></p>
                        <p>Temp: <span class="temp-forecast"></span> &#8457</p>
                        <p>Humidity: <span class="humidity-forecast"></span>%</p>
                        <p>Wind: <span class="wind-forecast"></span> MPH</p>
                      </div>
                  </div>
                </div>

            </div>

          </div>
        </div>
    </div>

    <script type="text/javascript">
      //ğŸ global variables
      var today = new Date();
      var weatherConditionCodes = [{id: 200, main: "Thunderstorm", description: "thunderstorm with light rain", icon: "11"},{id: 201, main: "Thunderstorm", description: "thunderstorm with rain", icon: "11"},{id: 202, main: "Thunderstorm", description: "thunderstorm with heavy rain", icon: "11"},{id: 210, main: "Thunderstorm", description: "light thunderstorm", icon: "11"},{id: 211, main: "Thunderstorm", description: "thunderstorm", icon: "11"},{id: 212, main: "Thunderstorm", description: "heavy thunderstorm", icon: "11"},{id: 221, main: "Thunderstorm", description: "ragged thunderstorm", icon: "11"},{id: 230, main: "Thunderstorm", description: "thunderstorm with light drizzle", icon: "11"},{id: 231, main: "Thunderstorm", description: "thunderstorm with drizzle", icon: "11"},{id: 232, main: "Thunderstorm", description: "thunderstorm with heavy drizzle", icon: "11"},{id: 300, main: "Drizzle", description: "light intensity drizzle", icon: "09"},{id: 301, main: "Drizzle", description: "drizzle", icon: "09"},{id: 302, main: "Drizzle", description: "heavy intensity drizzle", icon: "09"},{id: 310, main: "Drizzle", description: "light intensity drizzle rain", icon: "09"},{id: 311, main: "Drizzle", description: "drizzle rain", icon: "09"},{id: 312, main: "Drizzle", description: "heavy intensity drizzle rain", icon: "09"},{id: 313, main: "Drizzle", description: "shower rain and drizzle", icon: "09"},{id: 314, main: "Drizzle", description: "heavy shower rain and drizzle", icon: "09"},{id: 321, main: "Drizzle", description: "shower drizzle", icon: "09"},{id: 500, main: "Rain", description: "light rain", icon: "10"},{id: 501, main: "Rain", description: "moderate rain", icon: "10"},{id: 502, main: "Rain", description: "heavy intensity rain", icon: "10"},{id: 503, main: "Rain", description: "very heavy rain", icon: "10"},{id: 504, main: "Rain", description: "extreme rain", icon: "10"},{id: 511, main: "Rain", description: "freezing rain", icon: "13"},{id: 520, main: "Rain", description: "light intensity shower rain", icon: "09"},{id: 521, main: "Rain", description: "shower rain", icon: "09"},{id: 522, main: "Rain", description: "heavy intensity shower rain", icon: "09"},{id: 531, main: "Rain", description: "ragged shower rain", icon: "09"},{id: 600, main: "Snow", description: "light snow", icon: "13"},{id: 601, main: "Snow", description: "Snow", icon: "13"},{id: 602, main: "Snow", description: "Heavy snow", icon: "13"},{id: 611, main: "Snow", description: "Sleet", icon: "13"},{id: 612, main: "Snow", description: "Light shower sleet", icon: "13"},{id: 613, main: "Snow", description: "Shower sleet", icon: "13"},{id: 615, main: "Snow", description: "Light rain and snow", icon: "13"},{id: 616, main: "Snow", description: "Rain and snow", icon: "13"},{id: 620, main: "Snow", description: "Light shower snow", icon: "13"},{id: 621, main: "Snow", description: "Shower snow", icon: "13"},{id: 622, main: "Snow", description: "Heavy shower snow", icon: "13"},{id: 701, main: "Mist", description: "mist", icon: "50"},{id: 711, main: "Smoke", description: "Smoke", icon: "50"},{id: 721, main: "Haze", description: "Haze", icon: "50"},{id: 731, main: "Dust", description: "sand/ dust whirls", icon: "50"},{id: 741, main: "Fog", description: "fog", icon: "50"},{id: 751, main: "Sand", description: "sand", icon: "50"},{id: 761, main: "Dust", description: "dust", icon: "50"},{id: 762, main: "Ash", description: "volcanic ash", icon: "50"},{id: 771, main: "Squall", description: "squalls", icon: "50"},{id: 781, main: "Tornado", description: "tornado", icon: "50"},{id: 800, main: "Clear", description: "clear sky", icon: "01"},{id: 801, main: "Clouds", description: "few clouds: 11-25%", icon: "02"},{id: 802, main: "Clouds", description: "scattered clouds: 25-50%", icon: "03"},{id: 803, main: "Clouds", description: "broken clouds: 51-84%", icon: "04"},{id: 804, main: "Clouds", description: "overcast clouds: 85-100%", icon: "04"}]
      var cityList = [{name: 'New York', state: 'Â New York'}, {name: 'Los Angeles', state: 'Â California'}, {name: 'Chicago', state: 'Â Illinois'}, {name: 'Houston', state: 'Â Texas'}, {name: 'Phoenix', state: 'Â Arizona'}, {name: 'Philadelphia', state: 'Â Pennsylvania'}, {name: 'San Antonio', state: 'Â Texas'}, {name: 'San Diego', state: 'Â California'}, {name: 'Dallas', state: 'Â Texas'}, {name: 'San Jose', state: 'Â California'}, {name: 'Austin', state: 'Â Texas'}, {name: 'Jacksonville', state: 'Â Florida'}, {name: 'San Francisco', state: 'Â California'}, {name: 'Columbus', state: 'Â Ohio'}, {name: 'Fort Worth', state: 'Â Texas'}, {name: 'Indianapolis', state: 'Â Indiana'}, {name: 'Charlotte', state: 'Â North Carolina'}, {name: 'Seattle', state: 'Â Washington'}, {name: 'Denver', state: 'Â Colorado'}, {name: 'Washington, D.C.', state: 'none'}, {name: 'Boston', state: 'Â Massachusetts'}, {name: 'El Paso', state: 'Â Texas'}, {name: 'Detroit', state: 'Â Michigan'}, {name: 'Nashville', state: 'Â Tennessee'}, {name: 'Memphis', state: 'Â Tennessee'}, {name: 'Portland', state: 'Â Oregon'}, {name: 'Oklahoma City', state: 'Â Oklahoma'}, {name: 'Las Vegas', state: 'Â Nevada'}, {name: 'Louisville', state: 'Â Kentucky'}, {name: 'Baltimore', state: 'Â Maryland'}, {name: 'Milwaukee', state: 'Â Wisconsin'}, {name: 'Albuquerque', state: 'Â New Mexico'}, {name: 'Tucson', state: 'Â Arizona'}, {name: 'Fresno', state: 'Â California'}, {name: 'Sacramento', state: 'Â California'}, {name: 'Mesa', state: 'Â Arizona'}, {name: 'Kansas City', state: 'Â Missouri'}, {name: 'Atlanta', state: 'Â Georgia'}, {name: 'Long Beach', state: 'Â California'}, {name: 'Omaha', state: 'Â Nebraska'}, {name: 'Raleigh', state: 'Â North Carolina'}, {name: 'Colorado Springs', state: 'Â Colorado'}, {name: 'Miami', state: 'Â Florida'}, {name: 'Virginia Beach', state: 'Â Virginia'}, {name: 'Oakland', state: 'Â California'}, {name: 'Minneapolis', state: 'Â Minnesota'}, {name: 'Tulsa', state: 'Â Oklahoma'}, {name: 'Arlington', state: 'Â Texas'}, {name: 'New Orleans', state: 'Â Louisiana'}, {name: 'Wichita', state: 'Â Kansas'}, {name: 'Cleveland', state: 'Â Ohio'}, {name: 'Tampa', state: 'Â Florida'}, {name: 'Bakersfield', state: 'Â California'}, {name: 'Aurora', state: 'Â Colorado'}, {name: 'Anaheim', state: 'Â California'}, {name: 'Honolulu', state: 'Â Hawaii'}, {name: 'Santa Ana', state: 'Â California'}, {name: 'Riverside', state: 'Â California'}, {name: 'Corpus Christi', state: 'Â Texas'}, {name: 'Lexington', state: 'Â Kentucky'}, {name: 'Stockton', state: 'Â California'}, {name: 'St. Louis', state: 'Â Missouri'}, {name: 'Saint Paul', state: 'Â Minnesota'}, {name: 'Henderson', state: 'Â Nevada'}, {name: 'Pittsburgh', state: 'Â Pennsylvania'}, {name: 'Cincinnati', state: 'Â Ohio'}, {name: 'Anchorage', state: 'Â Alaska'}, {name: 'Greensboro', state: 'Â North Carolina'}, {name: 'Plano', state: 'Â Texas'}, {name: 'Newark', state: 'Â New Jersey'}, {name: 'Lincoln', state: 'Â Nebraska'}, {name: 'Orlando', state: 'Â Florida'}, {name: 'Irvine', state: 'Â California'}, {name: 'Toledo', state: 'Â Ohio'}, {name: 'Jersey City', state: 'Â New Jersey'}, {name: 'Chula Vista', state: 'Â California'}, {name: 'Durham', state: 'Â North Carolina'}, {name: 'Fort Wayne', state: 'Â Indiana'}, {name: 'St. Petersburg', state: 'Â Florida'}, {name: 'Laredo', state: 'Â Texas'}, {name: 'Buffalo', state: 'Â New York'}, {name: 'Madison', state: 'Â Wisconsin'}, {name: 'Lubbock', state: 'Â Texas'}, {name: 'Chandler', state: 'Â Arizona'}, {name: 'Scottsdale', state: 'Â Arizona'}, {name: 'Reno', state: 'Â Nevada'}, {name: 'Glendale', state: 'Â Arizona'}, {name: 'Norfolk', state: 'Â Virginia'}, {name: 'Winstonâ€“Salem', state: 'Â North Carolina'}, {name: 'North Las Vegas', state: 'Â Nevada'}, {name: 'Gilbert', state: 'Â Arizona'}, {name: 'Chesapeake', state: 'Â Virginia'}, {name: 'Irving', state: 'Â Texas'}, {name: 'Hialeah', state: 'Â Florida'}, {name: 'Garland', state: 'Â Texas'}, {name: 'Fremont', state: 'Â California'}, {name: 'Richmond', state: 'Â Virginia'}, {name: 'Boise', state: 'Â Idaho'}, {name: 'Baton Rouge', state: 'Â Louisiana'}, {name: 'Des Moines', state: 'Â Iowa'}, {name: 'Spokane', state: 'Â Washington'}, {name: 'San Bernardino', state: 'Â California'}, {name: 'Modesto', state: 'Â California'}, {name: 'Tacoma', state: 'Â Washington'}, {name: 'Fontana', state: 'Â California'}, {name: 'Santa Clarita', state: 'Â California'}, {name: 'Birmingham', state: 'Â Alabama'}, {name: 'Oxnard', state: 'Â California'}, {name: 'Fayetteville', state: 'Â North Carolina'}, {name: 'Rochester', state: 'Â New York'}, {name: 'Moreno Valley', state: 'Â California'}, {name: 'Glendale', state: 'Â California'}, {name: 'Yonkers', state: 'Â New York'}, {name: 'Huntington Beach', state: 'Â California'}, {name: 'Aurora', state: 'Â Illinois'}, {name: 'Salt Lake City', state: 'Â Utah'}, {name: 'Amarillo', state: 'Â Texas'}, {name: 'Montgomery', state: 'Â Alabama'}, {name: 'Grand Rapids', state: 'Â Michigan'}, {name: 'Little Rock', state: 'Â Arkansas'}, {name: 'Akron', state: 'Â Ohio'}, {name: 'Augusta', state: 'Â Georgia'}, {name: 'Huntsville', state: 'Â Alabama'}, {name: 'Columbus', state: 'Â Georgia'}, {name: 'Grand Prairie', state: 'Â Texas'}, {name: 'Shreveport', state: 'Â Louisiana'}, {name: 'Overland Park', state: 'Â Kansas'}, {name: 'Tallahassee', state: 'Â Florida'}, {name: 'Mobile', state: 'Â Alabama'}, {name: 'Port St. Lucie', state: 'Â Florida'}, {name: 'Knoxville', state: 'Â Tennessee'}, {name: 'Worcester', state: 'Â Massachusetts'}, {name: 'Tempe', state: 'Â Arizona'}, {name: 'Cape Coral', state: 'Â Florida'}, {name: 'Brownsville', state: 'Â Texas'}, {name: 'McKinney', state: 'Â Texas'}, {name: 'Providence', state: 'Â Rhode Island'}, {name: 'Fort Lauderdale', state: 'Â Florida'}, {name: 'Newport News', state: 'Â Virginia'}, {name: 'Chattanooga', state: 'Â Tennessee'}, {name: 'Rancho Cucamonga', state: 'Â California'}, {name: 'Frisco', state: 'Â Texas'}, {name: 'Sioux Falls', state: 'Â South Dakota'}, {name: 'Oceanside', state: 'Â California'}, {name: 'Ontario', state: 'Â California'}, {name: 'Vancouver', state: 'Â Washington'}, {name: 'Santa Rosa', state: 'Â California'}, {name: 'Garden Grove', state: 'Â California'}, {name: 'Elk Grove', state: 'Â California'}, {name: 'Pembroke Pines', state: 'Â Florida'}, {name: 'Salem', state: 'Â Oregon'}, {name: 'Eugene', state: 'Â Oregon'}, {name: 'Peoria', state: 'Â Arizona'}, {name: 'Corona', state: 'Â California'}, {name: 'Springfield', state: 'Â Missouri'}, {name: 'Jackson', state: 'Â Mississippi'}, {name: 'Cary', state: 'Â North Carolina'}, {name: 'Fort Collins', state: 'Â Colorado'}, {name: 'Hayward', state: 'Â California'}, {name: 'Lancaster', state: 'Â California'}, {name: 'Alexandria', state: 'Â Virginia'}, {name: 'Salinas', state: 'Â California'}, {name: 'Palmdale', state: 'Â California'}, {name: 'Lakewood', state: 'Â Colorado'}, {name: 'Springfield', state: 'Â Massachusetts'}, {name: 'Sunnyvale', state: 'Â California'}, {name: 'Hollywood', state: 'Â Florida'}, {name: 'Pasadena', state: 'Â Texas'}, {name: 'Clarksville', state: 'Â Tennessee'}, {name: 'Pomona', state: 'Â California'}, {name: 'Kansas City', state: 'Â Kansas'}, {name: 'Macon', state: 'Â Georgia'}, {name: 'Escondido', state: 'Â California'}, {name: 'Paterson', state: 'Â New Jersey'}, {name: 'Joliet', state: 'Â Illinois'}, {name: 'Naperville', state: 'Â Illinois'}, {name: 'Rockford', state: 'Â Illinois'}, {name: 'Torrance', state: 'Â California'}, {name: 'Bridgeport', state: 'Â Connecticut'}, {name: 'Savannah', state: 'Â Georgia'}, {name: 'Killeen', state: 'Â Texas'}, {name: 'Bellevue', state: 'Â Washington'}, {name: 'Mesquite', state: 'Â Texas'}, {name: 'Syracuse', state: 'Â New York'}, {name: 'McAllen', state: 'Â Texas'}, {name: 'Pasadena', state: 'Â California'}, {name: 'Orange', state: 'Â California'}, {name: 'Fullerton', state: 'Â California'}, {name: 'Dayton', state: 'Â Ohio'}, {name: 'Miramar', state: 'Â Florida'}, {name: 'Olathe', state: 'Â Kansas'}, {name: 'Thornton', state: 'Â Colorado'}, {name: 'Waco', state: 'Â Texas'}, {name: 'Murfreesboro', state: 'Â Tennessee'}, {name: 'Denton', state: 'Â Texas'}, {name: 'West Valley City', state: 'Â Utah'}, {name: 'Midland', state: 'Â Texas'}, {name: 'Carrollton', state: 'Â Texas'}, {name: 'Roseville', state: 'Â California'}, {name: 'Warren', state: 'Â Michigan'}, {name: 'Charleston', state: 'Â South Carolina'}, {name: 'Hampton', state: 'Â Virginia'}, {name: 'Surprise', state: 'Â Arizona'}, {name: 'Columbia', state: 'Â South Carolina'}, {name: 'Coral Springs', state: 'Â Florida'}, {name: 'Visalia', state: 'Â California'}, {name: 'Sterling Heights', state: 'Â Michigan'}, {name: 'Gainesville', state: 'Â Florida'}, {name: 'Cedar Rapids', state: 'Â Iowa'}, {name: 'New Haven', state: 'Â Connecticut'}, {name: 'Stamford', state: 'Â Connecticut'}, {name: 'Elizabeth', state: 'Â New Jersey'}, {name: 'Concord', state: 'Â California'}, {name: 'Thousand Oaks', state: 'Â California'}, {name: 'Kent', state: 'Â Washington'}, {name: 'Santa Clara', state: 'Â California'}, {name: 'Simi Valley', state: 'Â California'}, {name: 'Lafayette', state: 'Â Louisiana'}, {name: 'Topeka', state: 'Â Kansas'}, {name: 'Athens', state: 'Â Georgia'}, {name: 'Round Rock', state: 'Â Texas'}, {name: 'Hartford', state: 'Â Connecticut'}, {name: 'Norman', state: 'Â Oklahoma'}, {name: 'Victorville', state: 'Â California'}, {name: 'Fargo', state: 'Â North Dakota'}, {name: 'Berkeley', state: 'Â California'}, {name: 'Vallejo', state: 'Â California'}, {name: 'Abilene', state: 'Â Texas'}, {name: 'Columbia', state: 'Â Missouri'}, {name: 'Ann Arbor', state: 'Â Michigan'}, {name: 'Allentown', state: 'Â Pennsylvania'}, {name: 'Pearland', state: 'Â Texas'}, {name: 'Beaumont', state: 'Â Texas'}, {name: 'Wilmington', state: 'Â North Carolina'}, {name: 'Evansville', state: 'Â Indiana'}, {name: 'Arvada', state: 'Â Colorado'}, {name: 'Provo', state: 'Â Utah'}, {name: 'Independence', state: 'Â Missouri'}, {name: 'Lansing', state: 'Â Michigan'}, {name: 'Odessa', state: 'Â Texas'}, {name: 'Richardson', state: 'Â Texas'}, {name: 'Fairfield', state: 'Â California'}, {name: 'El Monte', state: 'Â California'}, {name: 'Rochester', state: 'Â Minnesota'}, {name: 'Clearwater', state: 'Â Florida'}, {name: 'Carlsbad', state: 'Â California'}, {name: 'Springfield', state: 'Â Illinois'}, {name: 'Temecula', state: 'Â California'}, {name: 'West Jordan', state: 'Â Utah'}, {name: 'Costa Mesa', state: 'Â California'}, {name: 'Miami Gardens', state: 'Â Florida'}, {name: 'Cambridge', state: 'Â Massachusetts'}, {name: 'College Station', state: 'Â Texas'}, {name: 'Murrieta', state: 'Â California'}, {name: 'Downey', state: 'Â California'}, {name: 'Peoria', state: 'Â Illinois'}, {name: 'Westminster', state: 'Â Colorado'}, {name: 'Elgin', state: 'Â Illinois'}, {name: 'Antioch', state: 'Â California'}, {name: 'Palm Bay', state: 'Â Florida'}, {name: 'High Point', state: 'Â North Carolina'}, {name: 'Lowell', state: 'Â Massachusetts'}, {name: 'Manchester', state: 'Â New Hampshire'}, {name: 'Pueblo', state: 'Â Colorado'}, {name: 'Gresham', state: 'Â Oregon'}, {name: 'North Charleston', state: 'Â South Carolina'}, {name: 'Ventura', state: 'Â California'}, {name: 'Inglewood', state: 'Â California'}, {name: 'Pompano Beach', state: 'Â Florida'}, {name: 'Centennial', state: 'Â Colorado'}, {name: 'West Palm Beach', state: 'Â Florida'}, {name: 'Everett', state: 'Â Washington'}, {name: 'Richmond', state: 'Â California'}, {name: 'Clovis', state: 'Â California'}, {name: 'Billings', state: 'Â Montana'}, {name: 'Waterbury', state: 'Â Connecticut'}, {name: 'Broken Arrow', state: 'Â Oklahoma'}, {name: 'Lakeland', state: 'Â Florida'}, {name: 'West Covina', state: 'Â California'}, {name: 'Boulder', state: 'Â Colorado'}, {name: 'Daly City', state: 'Â California'}, {name: 'Santa Maria', state: 'Â California'}, {name: 'Hillsboro', state: 'Â Oregon'}, {name: 'Sandy Springs', state: 'Â Georgia'}, {name: 'Norwalk', state: 'Â California'}, {name: 'Jurupa Valley', state: 'Â California'}, {name: 'Lewisville', state: 'Â Texas'}, {name: 'Greeley', state: 'Â Colorado'}, {name: 'Davie', state: 'Â Florida'}, {name: 'Green Bay', state: 'Â Wisconsin'}, {name: 'Tyler', state: 'Â Texas'}, {name: 'League City', state: 'Â Texas'}, {name: 'Burbank', state: 'Â California'}, {name: 'San Mateo', state: 'Â California'}, {name: 'Wichita Falls', state: 'Â Texas'}, {name: 'El Cajon', state: 'Â California'}, {name: 'Rialto', state: 'Â California'}, {name: 'Lakewood', state: 'Â New Jersey'}, {name: 'Edison', state: 'Â New Jersey'}, {name: 'Davenport', state: 'Â Iowa'}, {name: 'South Bend', state: 'Â Indiana'}, {name: 'Woodbridge', state: 'Â New Jersey'}, {name: 'Las Cruces', state: 'Â New Mexico'}, {name: 'Vista', state: 'Â California'}, {name: 'Renton', state: 'Â Washington'}, {name: 'Sparks', state: 'Â Nevada'}, {name: 'Clinton', state: 'Â Michigan'}, {name: 'Allen', state: 'Â Texas'}, {name: 'Tuscaloosa', state: 'Â Alabama'}, {name: 'San Angelo', state: 'Â Texas'}, {name: 'Vacaville', state: 'Â California'}];
      var myKey = "71c0ee10f1069decf1135c6c5422aa33";
      var listOfSearch = [];

      //ğŸ functions
      //create a function to filter the list according to user input.
      function filterList(input) {
        var filter = input.toUpperCase();
        var filterResult = [];
        var itemObj;
        var n = cityList.length
        for(var i=0; i<n; i++) {
          itemObj = cityList[i]
          if(itemObj.name.toUpperCase().indexOf(filter) > -1) {
            filterResult.push(itemObj);
          };
        };
        return(filterResult);
      };
      // make a function to transfer wind speed from meter per second to miles per hour
      function toMPH(speed) {
        return (speed*60*60/1609.34).toFixed(1);
      };

      //make a function to transfer temperature from kelvin to Fahrenheit
      function KtoF(temp) {
        return ((temp-273.15)*9/5 +32).toFixed(1);
      };

      //make a function to set the weather icon
      function weatherIcon(id, sunrise, sunset){
        var n=weatherConditionCodes.length;
        var iconId;
        var description;
        for(var i=0; i<n; i++) {
          if (weatherConditionCodes[i].id === id) {
            iconId = weatherConditionCodes[i].icon;
            description = weatherConditionCodes[i].description;
          }
        }
        
        var currentTime = today.getTime()/1000;
        var url;
        if (currentTime > sunrise && currentTime < sunset) {
          url = "http://openweathermap.org/img/wn/" + "04" + "d" + "@2x.png";
        } else {
          url = "http://openweathermap.org/img/wn/" + "04" + "n" + "@2x.png";
        };
        $("#icon").attr("src", url);
        $("#description").text(description);
      }

      //make a function to get UV index
      function getUVIndex(lat, lon) {
        var uvURL = "http://api.openweathermap.org/data/2.5/uvi?appid=" 
                      + myKey + "&lat=" + lat + "&lon=" + lon;
        $.ajax({
          url: uvURL,
          method: "GET"
        }).then(function(response) {
          var UVIndex = response.value
          $("#uv").text(UVIndex);
          setUVColor(UVIndex);
        });
      }

      //make a function to set uv color
      function setUVColor(index) {
        if (index < 3) {
          $("#uv").css({"background-color": "green", "color": "white", "padding": "5px"});
        } else if (index < 6) {
          $("#uv").css({"background-color": "yellow", "color": "black", "padding": "5px"});
        } else if (index < 8) {
          $("#uv").css({"background-color": "orange", "color": "white", "padding": "5px"});
        } else if (index < 11) {
          $("#uv").css({"background-color": "red", "color": "white", "padding": "5px"});
        } else {
          $("#uv").css({"background-color": "purple", "color": "white", "padding": "5px"});
        };
      };

      //make a function to set current weather
      function currentWeather(city, state) {
        $("#city-name").text(city + " " + state);
        var queryURL = "https://api.openweathermap.org/data/2.5/weather?q="
                        + city +"," +state
                        + "&appid=" + myKey;
        $.ajax({
          url: queryURL,
          method: "GET"
        }).then(function(response) {
          var temp = response.main.temp;
          $("#temperature").text(KtoF(temp));
          var humidity = response.main.humidity;
          $("#humidity").text(humidity);
          var windSpeed = response.wind.speed;
          $("#wind").text(toMPH(windSpeed));
          var weatherId = response.weather[0].id;
          var sunriseTime = response.sys.sunrise;
          var sunsetTime = response.sys.sunset;
          weatherIcon(weatherId, sunriseTime, sunsetTime);
          var latitude = response.coord.lat;
          var longitude = response.coord.lon;
          getUVIndex(latitude, longitude); 
        });
      }
      // End of current weather

      //make a function to set up 5 day forecast
      function fiveDayForecast(city, state) {
        var query5DayURL = "https://api.openweathermap.org/data/2.5/forecast?q="
                            + city +"," + state
                            + "&appid=" + myKey;
        $.ajax({
          url: query5DayURL,
          method: "GET"
        }).then(function(response) {
          //set up five day forecast cards
          for(var i=0; i<5; i++) {
            var IdName = "#day" + i;
            var t = 8*i-1*Boolean(i);
            var date = response.list[t].dt_txt;

            var temperature = KtoF(response.list[t].main.temp);
            var humidity = response.list[t].main.humidity;
            var iconID = response.list[t].weather[0].icon;
            var iconURL = "http://openweathermap.org/img/wn/" + iconID + "@2x.png";
            var description = response.list[t].weather[0].description;
            var wind = toMPH(response.list[t].wind.speed);
            
            $(IdName).find(".date-forecast").text(date.slice(0,10));

            $(IdName).find(".icon-forecast").attr("src",iconURL);
            $(IdName).find(".description-forecast").text(description);
            $(IdName).find(".temp-forecast").text(temperature);
            $(IdName).find(".humidity-forecast").text(humidity);
            $(IdName).find(".wind-forecast").text(wind);
          };
        });
      };

      //create a function to set up the history search list.
      function saveSearch(city, state) {
        var item = {cityName: city, stateName:state};
        listOfSearch.unshift(item);
        localStorage.setItem("weatherDashboard", JSON.stringify(listOfSearch));
        var record = $("<p>").text(city + ", " + state);
        record.attr("class","search-history");
        $("#history-list").prepend(record);

      };

      //create a function to initialize the page
      function initial() {
        var searchList = JSON.parse(localStorage.getItem("weatherDashboard"));
        var city, state;
        var n = searchList.length;
        for(var i=0; i<n; i++) {
          city = searchList[i].cityName;
          state = searchList[i].stateName;
          var record = $("<p>").text(city + ", " + state);
          record.attr("class","search-history");
          $("#history-list").prepend(record);
        };
        city = searchList[0].cityName;
        state = searchList[0].stateName;
        currentWeather(city, state);
        fiveDayForecast(city, state);
      };

      //ğŸ main program start
      //initialize the page
      initial();

      //search cities 
      $("#search-box").on("input", function() {
        var input = $(this).val();
        var list = filterList(input);
        $("#search-result").css("display","block");
        for(i=0; i<5; i++) {
          var elName = "#item" + i;
          if(i < list.length) {
            var city = list[i].name;
            var state = list[i].state;
            $(elName).text(city + ", " + state );
          } else {
            $(elName).text("");
          }
          if(input === "") {
            $(elName).text("");
            $("#search-result").css("display","none");
          }
        };
      });

      //select city
      $(".filter-list").on("click", function() {
        var choice = $(this).text();
        $("#search-box").val(choice);
        $("#search-result").css("display","none");
      });


      //trigger forecast by clicking search icon
      $("#search-btn").on("click", function(){
        event.preventDefault();
        var inputStr = $("#search-box").val()
        var inputArr = inputStr.split(", ");
        var city = inputArr[0];
        var state = inputArr[1].trim();
      
        currentWeather(city, state);
        fiveDayForecast(city, state);
        saveSearch(city, state);
      });

      //click on a city in the search history
      $(".search-history").on("click", function() {
        var str = $(this).text()
        var arr = str.split(", ");
        var city = arr[0];
        var state = arr[1].trim();
        currentWeather(city, state);
        fiveDayForecast(city, state);
      });

      //set up the forecast section
      var date = (today.getMonth() + 1) + "/" + today.getDate() + "/" + today.getFullYear();
      $("#date").text("("+ date + ")");
      

    </script>
  </body>
</html>